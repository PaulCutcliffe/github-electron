<!DOCTYPE html>
<html>
  <head><title>Github</title></head>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    #toolbar {
      display: flex;
      gap: 8px;
      align-items: center;
      padding: 8px;
      border-bottom: 1px solid #dadce0;
      background: #f7f9fb;
    }

    #toolbar button {
      padding: 6px 12px;
      font-size: 14px;
      border: 1px solid #ccd0d5;
      border-radius: 4px;
      background: #ffffff;
      cursor: pointer;
    }

    #toolbar button:disabled {
      cursor: default;
      opacity: 0.6;
    }

    #github {
      flex: 1;
    }
  </style>
  <script>
    onload = () => {
      const webview = document.querySelector("webview");
      const backButton = document.querySelector("#nav-back");
      const forwardButton = document.querySelector("#nav-forward");

      const updateNavigationState = () => {
        backButton.disabled = !webview.canGoBack();
        forwardButton.disabled = !webview.canGoForward();
      };

      webview.addEventListener("dom-ready", () => {
        webview.focus();
        updateNavigationState();
      });

      webview.addEventListener("new-window", (event) => {
        const targetUrl = event.url;
        if (!targetUrl) {
          return;
        }

        const isHttpUrl = targetUrl.startsWith("http:") || targetUrl.startsWith("https:");
        const isGithub = targetUrl.includes("github.com");

        if (isHttpUrl && !isGithub) {
          window.electronAPI.openExternal(targetUrl);
        } else if (isHttpUrl && isGithub) {
          webview.loadURL(targetUrl);
        }
      });

      webview.addEventListener("did-navigate", updateNavigationState);
      webview.addEventListener("did-navigate-in-page", updateNavigationState);

      const goBack = () => {
        if (webview.canGoBack()) {
          webview.goBack();
        }
      };

      const goForward = () => {
        if (webview.canGoForward()) {
          webview.goForward();
        }
      };

      const handleAltNavigation = (event) => {
        if (!event.altKey) {
          return;
        }

        if (event.code === "ArrowLeft") {
          event.preventDefault();
          goBack();
        } else if (event.code === "ArrowRight") {
          event.preventDefault();
          goForward();
        }
      };

      backButton.addEventListener("click", goBack);
      forwardButton.addEventListener("click", goForward);

      window.addEventListener("keydown", handleAltNavigation);
      webview.addEventListener("keydown", handleAltNavigation);
    }
    </script>
  <body>
    <div id="toolbar">
      <button id="nav-back" aria-label="Back" disabled>Back</button>
      <button id="nav-forward" aria-label="Forward" disabled>Forward</button>
    </div>
    <webview id="github" src="https://github.com"></webview>
  </body>
</html>
